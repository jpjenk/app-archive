<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>PBDB Data Archive</title>
  <!-- UIkit CSS -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.0.0-beta.35/css/uikit.min.css" />
	<!-- UIkit JS -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.0.0-beta.35/js/uikit.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.0.0-beta.35/js/uikit-icons.min.js"></script>
  <!-- JQuery -->
  <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-2.2.4.min.js"></script>
</head>

<body>

  <h1 class="uk-heading-line uk-text-center">Data Archives</h1>

  <ul class="uk-list uk-list-striped" id="archiveList">

</body>

<script type="text/javascript">
  $(document).ready(function(){
    $.ajax( {
      url: "https://training.paleobiodb.org/data1.2/archives/list.json?enterer=me",
      dataType: "json"
    })
    .done (function (data) {
	var r = data.records || [ ];
        for (var rec in r) {
	    var item;
	    
	    var oid = r[rec]['oid'];
	    var title = r[rec]['tit'] || '<i>Untitled</i>';
	    var doi = r[rec]['doi'] || '';
	    var authors = r[rec]['oau'] || 'none';
	    var uri = r[rec]['uri'] || '';
	    
	    if ( oid )
	    {
		var archive_no = oid.slice(4);
		
		item = "<li><span style='float:left;'>";
		item += "<a href='https://training.paleobiodb.org/classic/app/archive/view?id=";
		item += oid + "'>";
		item += "Archive " + archive_no;
		item += "</a>";
		item += ": <b>" + title + "</b>";
		if (doi) {
		    item += "  [" + doi + "]";
		}
		
		item += "</span><div style='float:right;'>";
		item += "<i> (" + authors + ")</i></li>";
		    <!-- item += "<br>" + r[rec]['uri_base'] + "</li>"; -->
		    
		$('#archiveList').append(item);
	    }
	}
    });
  })
</script>
   
</html>
